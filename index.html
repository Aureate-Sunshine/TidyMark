<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>TidyMark</title>
    <link rel="stylesheet" href="./github-markdown.css">
    <style type="text/css">
      * {
        box-sizing: border-box;
      }
      html, body{
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
      }
      #monacoContainer {
        position: fixed;
        top: 0;
        left: 0;
        width: 45%;
        height: 100%;
        font-size: 14px;
        padding-top: 16px;
        border:1px;
        border-color: #ccc;
      }
      #previewContainer {
        position:relative;
        top: 0;
        left: 50%;
        width: 45%;
        height: 100%;
        font-size: 14px;
        padding-top: 16px;
        border:1px;
        border-color: #ccc;
      }
      #statusBar {
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 40px;
        font-size: 14px;
        background: #007acc;
        color: #ffffff;
      }
      #charCount {
        font-size: 14px;
      }
      #charCountDiv {
        margin-left: 12px;
        font-size: 14px;
      }
      #textarea{
        display:none;
      }
      #refreshEditor{
        display:none;
      }
      .markdown-body {
		  box-sizing: border-box;
		  min-width: 200px;
		  max-width: 980px;
		  margin: 0 auto;
		  padding: 45px;
	  }

	  @media (max-width: 767px) {
		  .markdown-body {
			padding: 15px;
		}
	  }
    </style>
  </head>
  <body>
    <div id="monacoContainer"></div>
    <textarea id="textarea"></textarea>  
    <div id="previewContainer" class="markdown-body"></div>
    <div id="statusBar">
      <div id="charCountDiv">
          <p id="charCount"> 0 字符</p>
      </div>
    </div>
    <input type="button" id="refreshEditor"></input>
    <script>
      //全局变量
      var nodeRequire = global.require;
    </script>
    <script src="node_modules/monaco-editor/min/vs/loader.js"></script>
    <script>
      var amdRequire = global.require;
      global.require = nodeRequire;

      var path = require('path');
      function uriFromPath(_path) {
        var pathName = path.resolve(_path).replace(/\\/g, '/');
        if (pathName.length > 0 && pathName.charAt(0) !== '/') {
          pathName = '/' + pathName;
        }
        return encodeURI('file://' + pathName);
      }
      amdRequire.config({
        baseUrl: uriFromPath(path.join(__dirname, 'node_modules/monaco-editor/min'))
      });
      // workaround monaco-css not understanding the environment
      self.module = undefined;
      // workaround monaco-typescript not understanding the environment
      self.process.browser = true;
    </script>

    <script>
      // You can also require other files to run in this process
      require('./index.js')
    </script>
    <script src="./renderer/ipcRenderer.js"></script>
  </body>
</html>
